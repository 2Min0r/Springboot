
# 1장. 배치와 스프링
## 배치 이해
### 배치의 특징
- 처리 부하 예측하여 설계 가능
- 로그와 피드백용 알림으로 신속, 정확하게 에러 해결 가능

### 배치 설계시
- 오류 처리 : 디버깅에 오랜 시간 소요 X, 언제, 어디서, 왜 실패했는지 파악
- 유지보수 : 공통 컴포넌트를 쉽게 확장해 새로운 기능 추가 가능
- 가용성 : 허용된 시간 내에 잡 수행
- 가용성 : 필요할 때 바로 배치 처리 수행 가능
- 가용성 : 다른 시스템에 영향 미치지 않도록 하기
- 보안 : 데이터 암호화

### 배치처리 이유
1. 한 번에 처리하기에 합리적
    - ex. 월별 거래명세서
2. 지연시간의 필요성
    - ex. 고객변심에 따른 재처리비용 감소
3. 미리 데이터 생성
    - ex. 여러 단계가 필요한 데이터 미리 작업

### 배치처리 대상
- 상호작용 없는 데이터
- 중단없이 유한한 양의 데이터

## 아키텍처
### 레이어
1. 애플리케이션 레이어
- 개발코드, 코어 레이어와 상호작용
2. 코어 레이어
- 배치 영역을 구성하는 실제적인 여러 컴포넌트
3. 인프라스트럭처 레이어
- ItemReader, ItemWriter 등 클래스, 인터페이스

### 스텝 분리
- 독립적으로 분리하여 여러 잡에서 재사용 가능
- 병렬로 실행하여 코드 변경 최소화 및 확장 가능
- 오류 처리: 예외 발생시 재시도 및 Skip 가능

### Job의 관계
- Job -> JobInstance -> JobExecution
- 처음 실행시 Job에 대한 JobInstance, JobExecution 생성
- 실패 후 재실행시 Job에 대한 새로운 JobInstance 미생성, 추적 위한 JobExecution 생성
    - 하나의 JobInstance는 여러 개의 JobExecution 가질 수 있음